{"data":{"markdownRemark":{"html":"<p>I run a couple of services on my server, some of them are web, teamspeak, irc and an openvpn server. I need to be notified if any of these services becomes unresponsive for some reason. This is where <a href=\"https://mmonit.com/monit/\">Monit</a> comes in.</p>\n<h2 id=\"what-is-monit\"><a href=\"#what-is-monit\" aria-label=\"what is monit permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Monit?</h2>\n<blockquote>\n<p>Monit is a small Open Source utility for managing and monitoring Unix systems. Monit conducts automatic maintenance and repair and can execute meaningful causal actions in error situations.</p>\n</blockquote>\n<p>I use monit to monitor all my services and alert me via email if any service does not respond. For example, this is my monit configuration file for monitoring my web server:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">check host dubell.io with address dubell.io every 20 cycles \n  if failed\n        host dubell.io\n        port 443\n        protocol https\n        status = 200\n  then alert</code></pre></div>\n<p>This config file informs monit to check my website every 10 minutes and raise an alert if the HTTP status is not 200. An alert message looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Connection failed Service dubell.io\n\n        Date:        Sun, 12 Jun 2016 21:03:16\n        Action:      alert\n        Host:        dubellio\n        Description: failed protocol test [HTTP] at [dubell.io]:443 [TCPSSL/IP] -- HTTP error: Server returned status 502\n\nYour faithful employee,\nMonit</code></pre></div>\n<p>Monit will also inform you when a service starts responding again:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Connection succeeded Service dubell.io\n\n        Date:        Sun, 12 Jun 2016 21:04:19\n        Action:      alert\n        Host:        dubellio\n        Description: connection succeeded to [dubell.io]:443 [TCPSSL/IP]\n\nYour faithful employee,\nMonit</code></pre></div>\n<p>If you would like to monitor your own teamspeak server, you could do something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">check host youteamspeak.com with address 192.168.0.1\n   if failed\n     port 9987\n     type udp\n   then alert</code></pre></div>\n<p>If the teamspeak server does not respond using UDP packets on port 9987, raise an alert.</p>\n<h2 id=\"automatic-repair\"><a href=\"#automatic-repair\" aria-label=\"automatic repair permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Automatic Repair</h2>\n<p>What's great about Monit is that you can also specify what to do in the event of a crashed service. You can program monit to restart services or execute a specific program.</p>\n<p>In the following example we use udp for connection testing to check if the name-server is running, if false then restart the service:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> check process named with pidfile /var/run/named.pid\n       start program = &quot;/etc/init.d/named start&quot;\n       stop program  = &quot;/etc/init.d/named stop&quot;\n       if failed port 53 use type udp protocol dns then restart</code></pre></div>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Monitoring your services are a must for any serious applications or networks. Monit is a great and easy tool for making sure that servers and services are up and running.</p>\n<p>Check out the <a href=\"https://mmonit.com/monit/documentation/monit.html\">monit documentation</a> to find out what more you can do with Monit! </p>","timeToRead":2,"excerpt":"I run a couple of services on my server, some of them are web, teamspeak, irc and an openvpn server. I need to be notified if any of theseâ€¦","frontmatter":{"title":"Monitoring your server with Monit","slug":"monitoring-your-server-with-monit","date":"2016-06-12T00:00:00.000Z","categories":["System Administration"],"tags":["System Administration"],"template":"post"},"fields":{"nextTitle":"Securityfest CTF - Defacer Challenge Writeup","nextSlug":"/securityfest-ctf-defacer-challenge-writeup/","prevTitle":"Creating SYN flood attacks with Python","prevSlug":"/creating-syn-flood-attacks-with-python/","slug":"/monitoring-your-server-with-monit/","date":"2016-06-12T00:00:00.000Z"}}},"pageContext":{"slug":"/monitoring-your-server-with-monit/"}}