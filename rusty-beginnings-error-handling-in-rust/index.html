<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta content="utf-8" http-equiv=encoding><link rel=preload href=/fonts/vollkorn/Vollkorn-VariableFont_wght.ttf as=font type=font/ttf crossorigin><link rel=stylesheet href=/css/bootstrap-grid.min.css type=text/css><link rel=stylesheet href=/css/main.css type=text/css><meta name=apple-mobile-web-app-title content="dubell.io | Rusty Beginnings: Error Handling in Rust"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=twitter:site content="@dubs3c"><meta name=twitter:creator content="@dubs3c"><meta property="og:title" content="dubell.io | Rusty Beginnings: Error Handling in Rust"><meta name=twitter:title content="dubell.io | Rusty Beginnings: Error Handling in Rust"><meta itemprop=name content="dubell.io | Rusty Beginnings: Error Handling in Rust"><meta name=application-name content="dubell.io | Rusty Beginnings: Error Handling in Rust"><meta property="og:site_name" content="dubell.io"><meta property="og:article:published_time" content=2024-04-26T20:32:37Z><meta property="article:published_time" content=2024-04-26T20:32:37Z><base href=https://dubell.io/rusty-beginnings-error-handling-in-rust/><link rel=canonical href=https://dubell.io/rusty-beginnings-error-handling-in-rust/ itemprop=url><meta name=url content="https://dubell.io/rusty-beginnings-error-handling-in-rust/"><meta name=twitter:url content="https://dubell.io/rusty-beginnings-error-handling-in-rust/"><meta property="og:url" content="https://dubell.io/rusty-beginnings-error-handling-in-rust/"><meta property="og:article:author" content="Dubs3c"><meta property="article:author" content="Dubs3c"><meta name=author content="Dubs3c"><meta name=description content="Structured error handling in Rist"><meta itemprop=description content="Structured error handling in Rist"><meta property="og:description" content="Structured error handling in Rist"><meta name=twitter:description content="Structured error handling in Rist"><meta itemprop=image content="https://dubell.io/img/logo2.png"><meta property="og:image" content="https://dubell.io/img/logo2.png"><meta name=twitter:image content="https://dubell.io/img/logo2.png"><meta name=twitter:image:src content="https://dubell.io/img/logo2.png"><meta property="og:updated_time" content=2024-04-26T20:32:37Z><link rel=sitemap type=application/xml title=Sitemap href=https://dubell.io/sitemap.xml><title>dubell.io | Rusty Beginnings: Error Handling in Rust</title></head><body><div class=container><div class=row><div class=col><h1 class=logo-title><a href=/>dubell.io</a></h1></div></div><div class=row><div class=col-lg-6><nav id=menu><ul><li><a href=/>/etc/motd</a></li><li><a href=/www/>/var/www</a></li><li><a href=/categories/advisories/>/home/advisories</a></li><li><a href="https://github.com/dubs3c?tab=repositories&q=&type=source&language=&sort=">/home/code</a></li><li><a href=/mnt/>/mnt</a></li><li><a href=/usr/>/usr</a></li></ul></nav></div></div><div class=row><article><h1>Rusty Beginnings: Error Handling in Rust</h1><p><small><a href=/categories/programming>Programming</a> / April 26, 2024 • 9 min read</small><br><small><strong>Tags:</strong> <a href=/tags/rust class=tag>rust</a> <a href=/tags/rusty-beginnings class=tag>rusty-beginnings</a></small></p><div id=article_content><div class=row><div class=col-lg-6><p>I never liked the verbosity of Rust. Rust code always looked messy and so different from what I am used to. But since I started learning Rust, I have begun to enjoy the language. However, one thing that has been more difficult than what I have imagined it to be, is error handling.</p><p>For example, in Go it is normal to return <code>Error</code> and simply set it <code>nil</code> if there is no error. In Rust however, error handling has far more expressive. As part of my rusty learning experience, I would like to document how to perform structured error handling which involves managing errors in a consistent and maintainable manner to create more robust code.</p><p>In Rust, the primary built-in mechanisms for structured error handling are <code>Option</code> and <code>Result</code>. Both Option and Result are enums used for error handling and signaling the absence or presence of a value. They serve similar but distinct purposes:</p><ul><li><p><code>Option&lt;T></code> is used when there might be a value (<code>Some(T)</code>) or there might not be a value (<code>None</code>). It&rsquo;s typically used in situations where the absence of a value is not considered an error.</p></li><li><p><code>Result&lt;T, E></code> is used when an operation might succeed with a value (<code>Ok(T)</code>) or fail with an error (<code>Err(E)</code>). This is used in cases where you need to handle potential errors and success states separately.</p></li></ul><p>The <code>Option</code> type is simpler than <code>Result</code> because it only deals with the presence or absence of a value, without involving error handling logic. This makes <code>Option</code> suitable for cases where the only concern is whether a value exists.</p><p>Because the <code>Result</code> contains an error (<code>Err(E)</code>), it is possible to convey why an operation failed, making it ideal for handling multiple errors. Benefits <code>Result</code> provides:</p><ul><li><p><strong>Explicit Error Handling</strong>: <code>Result</code> requires explicit handling of the success or failure case, ensuring that errors cannot be ignored unintentionally. This contrasts with exceptions in other languages where an uncaught exception might propagate up the stack silently.</p></li><li><p><strong>Self-documenting Code</strong>: Function signatures with <code>Result</code> clearly communicate that an operation might fail, what type of value is returned on success, and what type of error might occur.</p></li><li><p><strong>Type Safety</strong>: <code>Result</code> is a generic type (Result&lt;T, E>), allowing developers to specify the exact types of successful values and errors, which enhances type safety and clarity.</p></li></ul><p>There different ways of handling these errors, here are several common strategies:</p><h2 id=unwrap-or-expect>unwrap() or expect()</h2><p>These methods will return the result or panic if there is an error or the value is None. This should generally not be used in production, because they can cause the program to panic, which is not a graceful way to handle errors in production. Rust&rsquo;s philosophy encourages handling errors explicitly to avoid runtime panics.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#177500>// Example using unwrap and expect
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#177500></span><span style=color:#a90d91>let</span> <span style=color:#000>maybe_number</span>: <span style=color:#a90d91>Option</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span><span style=color:#000>&gt;</span> <span style=color:#000>=</span> <span style=color:#a90d91>Some</span>(<span style=color:#1c01ce>42</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#a90d91>let</span> <span style=color:#000>number</span> <span style=color:#000>=</span> <span style=color:#000>maybe_number</span>.<span style=color:#000>unwrap</span>(); <span style=color:#177500>// This will succeed and return 42
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#177500></span><span style=color:#a90d91>let</span> <span style=color:#000>maybe_nothing</span>: <span style=color:#a90d91>Option</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span><span style=color:#000>&gt;</span> <span style=color:#000>=</span> <span style=color:#a90d91>None</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#a90d91>let</span> <span style=color:#000>nothing</span> <span style=color:#000>=</span> <span style=color:#000>maybe_nothing</span>.<span style=color:#000>expect</span>(<span style=color:#c41a16>&#34;This will panic with a custom message&#34;</span>);
</span></span></code></pre></div><h2 id=unwrap_or-or-unwrap_or_else>unwrap_or() or unwrap_or_else()</h2><p>Similar to the above methods, expect they allow the user setting default value if there is an error/None. unwrap_or_else() returns a closure which allows for more computation or fallback logic. Can be used in production. Use unwrap_or() or unwrap_or_else() when a reasonable default value can allow your program to continue in a meaningful way.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#177500>// Example using unwrap_or and unwrap_or_else
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#177500></span><span style=color:#a90d91>let</span> <span style=color:#000>maybe_number</span>: <span style=color:#a90d91>Option</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span><span style=color:#000>&gt;</span> <span style=color:#000>=</span> <span style=color:#a90d91>None</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#a90d91>let</span> <span style=color:#000>number</span> <span style=color:#000>=</span> <span style=color:#000>maybe_number</span>.<span style=color:#000>unwrap_or</span>(<span style=color:#1c01ce>0</span>); <span style=color:#177500>// This will return 0
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#177500></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#a90d91>let</span> <span style=color:#000>result</span>: <span style=color:#a90d91>Result</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span>, <span style=color:#000>&amp;</span><span style=color:#a90d91>str</span><span style=color:#000>&gt;</span> <span style=color:#000>=</span> <span style=color:#a90d91>Err</span>(<span style=color:#c41a16>&#34;error&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#a90d91>let</span> <span style=color:#000>value</span> <span style=color:#000>=</span> <span style=color:#000>result</span>.<span style=color:#000>unwrap_or_else</span>(<span style=color:#000>|</span><span style=color:#000>e</span><span style=color:#000>|</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>    <span style=color:#000>eprintln!</span>(<span style=color:#c41a16>&#34;Encountered an error: </span><span style=color:#c41a16>{}</span><span style=color:#c41a16>&#34;</span>, <span style=color:#000>e</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>    <span style=color:#000>-</span><span style=color:#1c01ce>1</span> <span style=color:#177500>// return a default value if there&#39;s an error
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span><span style=color:#177500></span>});
</span></span></code></pre></div><h2 id=match>match()</h2><p>Pattern matching which provides a way to handle multiple cases. Generates more verbose code but allows handling errors gracefully. Using match for error handling in Rust is particularly useful when you need fine-grained control over the handling of different error cases. For example:</p><ul><li>Handling Different Error Types</li><li>When You Need to Execute Different Logic for Each Error</li><li>Combining Error Handling with Value Unpacking</li><li>Propagating Errors with Modifications</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#177500>// Example using match for error handling
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#177500></span><span style=color:#a90d91>let</span> <span style=color:#000>result</span>: <span style=color:#a90d91>Result</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span>, <span style=color:#000>&amp;</span><span style=color:#a90d91>str</span><span style=color:#000>&gt;</span> <span style=color:#000>=</span> <span style=color:#a90d91>Err</span>(<span style=color:#c41a16>&#34;No value&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#a90d91>let</span> <span style=color:#000>outcome</span> <span style=color:#000>=</span> <span style=color:#a90d91>match</span> <span style=color:#000>result</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    <span style=color:#a90d91>Ok</span>(<span style=color:#000>value</span>) <span style=color:#000>=&gt;</span> <span style=color:#000>format!</span>(<span style=color:#c41a16>&#34;Received value: </span><span style=color:#c41a16>{}</span><span style=color:#c41a16>&#34;</span>, <span style=color:#000>value</span>),
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    <span style=color:#a90d91>Err</span>(<span style=color:#000>e</span>) <span style=color:#000>=&gt;</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>        <span style=color:#000>eprintln!</span>(<span style=color:#c41a16>&#34;Error: </span><span style=color:#c41a16>{}</span><span style=color:#c41a16>&#34;</span>, <span style=color:#000>e</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>        <span style=color:#c41a16>&#34;Error encountered&#34;</span>.<span style=color:#000>to_string</span>()
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>};
</span></span></code></pre></div><h2 id=if-let>if let</h2><p>If you just want to check the single value, <code>if let</code> can be used. For cases where you&rsquo;re interested in one particular success or error case. <code>if let</code> is particularly handy when you&rsquo;re only interested in one variant of the Result (usually the Ok variant) and want to ignore the rest, providing a more concise alternative to match for simple cases.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#177500>// Example using if let for simple case handling
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#177500></span><span style=color:#a90d91>let</span> <span style=color:#000>some_option</span>: <span style=color:#a90d91>Option</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span><span style=color:#000>&gt;</span> <span style=color:#000>=</span> <span style=color:#a90d91>Some</span>(<span style=color:#1c01ce>10</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#a90d91>if</span> <span style=color:#a90d91>let</span> <span style=color:#a90d91>Some</span>(<span style=color:#000>value</span>) <span style=color:#000>=</span> <span style=color:#000>some_option</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>    <span style=color:#000>println!</span>(<span style=color:#c41a16>&#34;Received a value: </span><span style=color:#c41a16>{}</span><span style=color:#c41a16>&#34;</span>, <span style=color:#000>value</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>} <span style=color:#a90d91>else</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>    <span style=color:#000>println!</span>(<span style=color:#c41a16>&#34;No value received&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>}
</span></span></code></pre></div><h2 id=heading>?</h2><p>The <code>?</code> operator in Rust is a convenient shorthand for error handling, primarily used to simplify the propagation of errors up the call stack. When applied to a result of the Result type, it automatically handles the Err variant by returning it from the current function, while letting the code proceed normally if the result is Ok. This operator significantly reduces boilerplate when dealing with sequences of operations that might fail, making the code more concise and readable. Use the <code>?</code> operator when you want to propagate errors upwards, allowing the caller of your function to handle them. Can be used in production.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#177500>// Example using ? operator for error propagation
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#177500></span><span style=color:#a90d91>fn</span> <span style=color:#000>get_value</span>() -&gt; <span style=color:#a90d91>Result</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span>, <span style=color:#a90d91>String</span><span style=color:#000>&gt;</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>    <span style=color:#a90d91>let</span> <span style=color:#000>step1</span>: <span style=color:#a90d91>Result</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span>, <span style=color:#a90d91>String</span><span style=color:#000>&gt;</span> <span style=color:#000>=</span> <span style=color:#a90d91>Ok</span>(<span style=color:#1c01ce>10</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>    <span style=color:#a90d91>let</span> <span style=color:#000>step2</span>: <span style=color:#a90d91>Result</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span>, <span style=color:#a90d91>String</span><span style=color:#000>&gt;</span> <span style=color:#000>=</span> <span style=color:#a90d91>Ok</span>(<span style=color:#1c01ce>20</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>    <span style=color:#a90d91>let</span> <span style=color:#000>result</span> <span style=color:#000>=</span> <span style=color:#000>step1</span><span style=color:#000>?</span> <span style=color:#000>+</span> <span style=color:#000>step2</span><span style=color:#000>?</span>; <span style=color:#177500>// Propagates error if any of the Results is Err
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#177500></span>    <span style=color:#a90d91>Ok</span>(<span style=color:#000>result</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>}
</span></span></code></pre></div><h2 id=map_err>map_err()</h2><p>The <code>map_err</code> method is used with Result types to transform the error (Err) part of a Result into a different type. This is particularly useful when you need to convert an error from one type to another to match the expected error type of a function&rsquo;s return value. <code>map_err</code> takes a closure that takes the original error as a parameter and returns a new error type.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#177500>// Example using map_err to transform error types
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#177500></span><span style=color:#a90d91>let</span> <span style=color:#000>result</span>: <span style=color:#a90d91>Result</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span>, <span style=color:#000>&amp;</span><span style=color:#a90d91>str</span><span style=color:#000>&gt;</span> <span style=color:#000>=</span> <span style=color:#a90d91>Err</span>(<span style=color:#c41a16>&#34;404&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#a90d91>let</span> <span style=color:#000>updated_error</span> <span style=color:#000>=</span> <span style=color:#000>result</span>.<span style=color:#000>map_err</span>(<span style=color:#000>|</span><span style=color:#000>e</span><span style=color:#000>|</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>    <span style=color:#000>format!</span>(<span style=color:#c41a16>&#34;Error occurred: </span><span style=color:#c41a16>{}</span><span style=color:#c41a16>&#34;</span>, <span style=color:#000>e</span>) <span style=color:#177500>// Transforms &amp;str error to String error
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#177500></span>});
</span></span></code></pre></div><h2 id=and_then>and_then()</h2><p>Can be used for chaining another operation that returns a <code>Result</code>. If the initial <code>Result</code> is Ok, <code>and_then</code> calls its closure with the Ok value and expects another Result in return. If the initial Result is Err, the error is propagated without calling the closure.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#177500>// Example using and_then for chaining operations that may fail
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#177500></span><span style=color:#a90d91>let</span> <span style=color:#000>result</span>: <span style=color:#a90d91>Result</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span>, <span style=color:#000>&amp;</span><span style=color:#a90d91>str</span><span style=color:#000>&gt;</span> <span style=color:#000>=</span> <span style=color:#a90d91>Ok</span>(<span style=color:#1c01ce>10</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#a90d91>let</span> <span style=color:#000>final_result</span> <span style=color:#000>=</span> <span style=color:#000>result</span>.<span style=color:#000>and_then</span>(<span style=color:#000>|</span><span style=color:#000>num</span><span style=color:#000>|</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>    <span style=color:#a90d91>if</span> <span style=color:#000>num</span> <span style=color:#000>&gt;</span> <span style=color:#1c01ce>5</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>        <span style=color:#a90d91>Ok</span>(<span style=color:#000>num</span> <span style=color:#000>*</span> <span style=color:#1c01ce>2</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>    } <span style=color:#a90d91>else</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>        <span style=color:#a90d91>Err</span>(<span style=color:#c41a16>&#34;Number is too low&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span>});
</span></span></code></pre></div><h2 id=custom-error-types>Custom Error Types</h2><p>Custom error types in Rust are used to define specific kinds of errors that can occur in your application, making it easier to handle these errors in a structured way. By creating custom error types, you can encapsulate different error scenarios into a single type that implements the <code>Error</code> trait. This approach improves code readability and error management, especially in larger applications where multiple kinds of errors need to be handled differently.</p><p>To define a custom error type, you typically use an enum to represent different error conditions and derive traits like <code>Debug</code> and <code>Display</code> for basic error handling. Here&rsquo;s an example that demonstrates how to define and use a custom error type:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#a90d91>use</span> <span style=color:#000>std</span>::<span style=color:#000>fmt</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#177500>// Define a custom error type using an enum
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#177500></span><span style=color:#633820>#[derive(Debug)]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#a90d91>enum</span> <span style=color:#3f6e75>NetworkError</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    <span style=color:#000>NotFound</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    <span style=color:#000>PermissionDenied</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    <span style=color:#000>Timeout</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    <span style=color:#000>Unexpected</span>(<span style=color:#a90d91>String</span>), <span style=color:#177500>// Allows for an unexpected error message
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#177500></span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#177500>// Implement fmt::Display for the custom error
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#177500></span><span style=color:#a90d91>impl</span> <span style=color:#000>fmt</span>::<span style=color:#000>Display</span> <span style=color:#a90d91>for</span> <span style=color:#000>NetworkError</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>    <span style=color:#a90d91>fn</span> <span style=color:#000>fmt</span>(<span style=color:#000>&amp;</span><span style=color:#5b269a>self</span>, <span style=color:#000>f</span>: <span style=color:#a90d91>&amp;</span><span style=color:#3f6e75>mut</span> <span style=color:#000>fmt</span>::<span style=color:#000>Formatter</span>) -&gt; <span style=color:#3f6e75>fmt</span>::<span style=color:#a90d91>Result</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>        <span style=color:#a90d91>match</span> <span style=color:#000>*</span><span style=color:#5b269a>self</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>            <span style=color:#000>NetworkError</span>::<span style=color:#000>NotFound</span> <span style=color:#000>=&gt;</span> <span style=color:#000>write!</span>(<span style=color:#000>f</span>, <span style=color:#c41a16>&#34;Resource not found&#34;</span>),
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>            <span style=color:#000>NetworkError</span>::<span style=color:#000>PermissionDenied</span> <span style=color:#000>=&gt;</span> <span style=color:#000>write!</span>(<span style=color:#000>f</span>, <span style=color:#c41a16>&#34;Permission denied&#34;</span>),
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>            <span style=color:#000>NetworkError</span>::<span style=color:#000>Timeout</span> <span style=color:#000>=&gt;</span> <span style=color:#000>write!</span>(<span style=color:#000>f</span>, <span style=color:#c41a16>&#34;Operation timed out&#34;</span>),
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>            <span style=color:#000>NetworkError</span>::<span style=color:#000>Unexpected</span>(<span style=color:#a90d91>ref</span> <span style=color:#000>msg</span>) <span style=color:#000>=&gt;</span> <span style=color:#000>write!</span>(<span style=color:#000>f</span>, <span style=color:#c41a16>&#34;Unexpected error: {}&#34;</span>, <span style=color:#000>msg</span>),
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>        }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#177500>// Use the custom error type in a function that might fail
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span><span style=color:#177500></span><span style=color:#a90d91>fn</span> <span style=color:#000>fetch_data</span>(<span style=color:#000>url</span>: <span style=color:#a90d91>&amp;</span><span style=color:#a90d91>str</span>) -&gt; <span style=color:#a90d91>Result</span><span style=color:#000>&lt;</span><span style=color:#a90d91>String</span>, <span style=color:#000>NetworkError</span><span style=color:#000>&gt;</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>    <span style=color:#a90d91>if</span> <span style=color:#000>url</span> <span style=color:#000>==</span> <span style=color:#c41a16>&#34;&#34;</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>        <span style=color:#a90d91>return</span> <span style=color:#a90d91>Err</span>(<span style=color:#000>NetworkError</span>::<span style=color:#000>NotFound</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>    } <span style=color:#a90d91>else</span> <span style=color:#a90d91>if</span> <span style=color:#000>url</span>.<span style=color:#000>contains</span>(<span style=color:#c41a16>&#34;forbidden&#34;</span>) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>        <span style=color:#a90d91>return</span> <span style=color:#a90d91>Err</span>(<span style=color:#000>NetworkError</span>::<span style=color:#000>PermissionDenied</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span>    } <span style=color:#a90d91>else</span> <span style=color:#a90d91>if</span> <span style=color:#000>url</span>.<span style=color:#000>contains</span>(<span style=color:#c41a16>&#34;timeout&#34;</span>) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>        <span style=color:#a90d91>return</span> <span style=color:#a90d91>Err</span>(<span style=color:#000>NetworkError</span>::<span style=color:#000>Timeout</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>    <span style=color:#a90d91>Ok</span>(<span style=color:#c41a16>&#34;Data fetched successfully&#34;</span>.<span style=color:#000>to_string</span>())
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span><span style=color:#a90d91>fn</span> <span style=color:#000>main</span>() {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span>    <span style=color:#a90d91>match</span> <span style=color:#000>fetch_data</span>(<span style=color:#c41a16>&#34;http://example.com/forbidden&#34;</span>) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span>        <span style=color:#a90d91>Ok</span>(<span style=color:#000>data</span>) <span style=color:#000>=&gt;</span> <span style=color:#000>println!</span>(<span style=color:#c41a16>&#34;Data: </span><span style=color:#c41a16>{}</span><span style=color:#c41a16>&#34;</span>, <span style=color:#000>data</span>),
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span><span>        <span style=color:#a90d91>Err</span>(<span style=color:#000>e</span>) <span style=color:#000>=&gt;</span> <span style=color:#000>println!</span>(<span style=color:#c41a16>&#34;Error: </span><span style=color:#c41a16>{}</span><span style=color:#c41a16>&#34;</span>, <span style=color:#000>e</span>),
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span><span>}
</span></span></code></pre></div><h2 id=from-and-into-for-error-type-conversions>From and Into for Error Type Conversions</h2><p>Rust&rsquo;s <strong>From</strong> and <strong>Into</strong> traits are a generalised way to convert types between each other. In the context of error handling, implementing the <strong>From</strong> trait for your custom error types allows for automatic conversion of other errors into your type within the <code>?</code> operator or <strong>try</strong> blocks, simplifying error handling and propagation.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#a90d91>struct</span> <span style=color:#3f6e75>MyError</span>(<span style=color:#a90d91>String</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#a90d91>impl</span> <span style=color:#a90d91>From</span><span style=color:#000>&lt;</span><span style=color:#000>ParseIntError</span><span style=color:#000>&gt;</span> <span style=color:#a90d91>for</span> <span style=color:#000>MyError</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    <span style=color:#a90d91>fn</span> <span style=color:#000>from</span>(<span style=color:#000>err</span>: <span style=color:#3f6e75>ParseIntError</span>) -&gt; <span style=color:#3f6e75>MyError</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>        <span style=color:#000>MyError</span>(<span style=color:#000>err</span>.<span style=color:#000>to_string</span>())
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#a90d91>fn</span> <span style=color:#000>parse_number_to_my_error</span>(<span style=color:#000>number_str</span>: <span style=color:#a90d91>&amp;</span><span style=color:#a90d91>str</span>) -&gt; <span style=color:#a90d91>Result</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span>, <span style=color:#000>MyError</span><span style=color:#000>&gt;</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>    <span style=color:#000>number_str</span>.<span style=color:#000>parse</span>::<span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span><span style=color:#000>&gt;</span>().<span style=color:#000>map_err</span>(<span style=color:#000>MyError</span>::<span style=color:#000>from</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#177500>// Or simply using `?` with automatic conversion
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#177500></span><span style=color:#a90d91>fn</span> <span style=color:#000>parse_with_question_mark</span>(<span style=color:#000>number_str</span>: <span style=color:#a90d91>&amp;</span><span style=color:#a90d91>str</span>) -&gt; <span style=color:#a90d91>Result</span><span style=color:#000>&lt;</span><span style=color:#a90d91>i32</span>, <span style=color:#000>MyError</span><span style=color:#000>&gt;</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>    <span style=color:#a90d91>let</span> <span style=color:#000>num</span>: <span style=color:#a90d91>i32</span> <span style=color:#000>=</span> <span style=color:#000>number_str</span>.<span style=color:#000>parse</span>()<span style=color:#000>?</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>    <span style=color:#a90d91>Ok</span>(<span style=color:#000>num</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>}
</span></span></code></pre></div><h2 id=boxdyn-error><code>Box&lt;dyn Error></code></h2><p>In Rust, <code>Box&lt;dyn Error></code> is a common way to handle heterogeneous error types in a flexible and dynamic manner. It is used when a function might return multiple types of errors, or when the exact type of the error is not known at compile time. This is achieved by boxing errors into a type-erased trait object.</p><p><strong>What is <code>dyn Error</code>?</strong></p><p><code>dyn Error</code> is a trait object that represents any type that implements the <code>std::error::Error</code> trait. By using <code>dyn Error</code>, you can handle different error types dynamically.</p><p><strong>Why use <code>Box&lt;dyn Error></code>?</strong></p><ul><li><strong>Flexibility</strong>: It allows a function to return different types of errors, making it easier to write generic error-handling code.</li><li><strong>Simplicity</strong>: It simplifies function signatures when multiple error types are possible, reducing the need for custom error enumerations or other complex error handling schemes.</li><li><strong>Compatibility</strong>: Many standard library functions and third-party crates use <code>Box&lt;dyn Error></code> when they need to return various kinds of errors.</li></ul><p>Using <code>Box&lt;dyn Error></code> is particularly useful in applications where error handling needs to be generic or when integrating with multiple libraries that may return different types of errors. It provides a way to &ldquo;erase&rdquo; the specific types of errors, focusing instead on the fact that they are errors, which can be handled generically. However, it understandably has some drawbacks, namely the fact that you lose the specific type information of the errors. This means that while you can handle any error generically, you cannot perform operations that depend on knowing the exact type of the error at compile time. If you want to inspect the error, you need to downcast which can complicate the code and potentially impact performace. Lastly, dynamic dispatch introduces a small runtime cost because the exact method to call on an error object isn’t known until runtime. This is generally a minor concern but can be relevant in performance-critical applications.</p><h2 id=closing-thoughts>Closing Thoughts</h2><p>Learning how to perform structured error handling in Rust has not been easy, however after delving into error handling in Rust, I believe I am starting to recognise when to return certain error types and how to handle them appropriately. Rust&rsquo;s expressiveness is growing on me, although at times it can feel overly verbose.</p><p>In this article, I have covered various error handling techniques that I have encountered in my journey. There are probably more techniques and tricks that I am unaware of, hopefully this article can be a starting point for further exploration in structured error handling in Rust.</p></div><div class="col offset-md-1"><div id=TableOfContents-div><p style=padding-inline-start:40px;margin-bottom:0;font-size:1em>CONTENTS</p><nav id=TableOfContents><ul><li><a href=#unwrap-or-expect>unwrap() or expect()</a></li><li><a href=#unwrap_or-or-unwrap_or_else>unwrap_or() or unwrap_or_else()</a></li><li><a href=#match>match()</a></li><li><a href=#if-let>if let</a></li><li><a href=#heading>?</a></li><li><a href=#map_err>map_err()</a></li><li><a href=#and_then>and_then()</a></li><li><a href=#custom-error-types>Custom Error Types</a></li><li><a href=#from-and-into-for-error-type-conversions>From and Into for Error Type Conversions</a></li><li><a href=#boxdyn-error><code>Box&lt;dyn Error></code></a></li><li><a href=#closing-thoughts>Closing Thoughts</a></li></ul></nav></div></div></div></div></article></div><div class=row><footer></footer></div></div><script src=/js/bootstrap.min.js async></script><script src=/js/main.js defer async></script></body></html>